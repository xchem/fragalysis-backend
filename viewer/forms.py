from django import forms
from django.conf import settings

CSET_CHOICES = [
    ('V', 'Validate'),
    ('U', 'Upload'),
    ('D', 'Delete'),
]

TSET_CHOICES = [
    ('V', 'Validate'),
    ('U', 'Upload'),
]


class CSetForm(forms.Form):
    """Used for uploading Computed sets at viewer/upload_cset
    """
    target_name = forms.CharField(label='Target', max_length=100, required=False)
    sdf_file = forms.FileField(label='All compounds sdf (.sdf)', required=False)
    pdb_zip = forms.FileField(label='PDB files (.zip)', required=False)
    submit_choice = forms.CharField(widget=forms.RadioSelect(choices=CSET_CHOICES))
    # The upload_key was removed as part of development if issue-859,
    # the phase 2 Job launcher,
    # The user-specific 'upload_key' is/was key generated by `viewer.views.cset_key`


class CSetUpdateForm(forms.Form):
    """Used for updating Computed sets at viewer/update_cset
    """
    target_name = forms.CharField(label='Target', max_length=100)
    sdf_file = forms.FileField(label='All compounds sdf (.sdf)')
    pdb_zip = forms.FileField(required=False, label='PDB files (.zip)')


class TSetForm(forms.Form):
    """Used for uploading Target sets at viewer/upload_tset
    """
    target_name = forms.CharField(label='Target', max_length=100)
    target_zip = forms.FileField(required=True, label='Target data (.zip)')
    submit_choice = forms.CharField(widget=forms.RadioSelect(choices=TSET_CHOICES))

    # For Diamond, a proposal is always required.
    # For other implementations, it may be optional or omitted.
    if settings.PROPOSAL_SUPPORTED and settings.PROPOSAL_REQUIRED:
        proposal_ref = forms.CharField(required=True, label='Proposal', max_length=200, initial='OPEN')
    elif settings.PROPOSAL_SUPPORTED:
        proposal_ref = forms.CharField(required=False, label='Proposal', max_length=200, initial='OPEN')
    else:
        proposal_ref = ''

    contact_email = forms.EmailField(widget=forms.TextInput(attrs={'class': 'form-control',
                                                                   'autocomplete': 'off'}),
                                     required=False)
